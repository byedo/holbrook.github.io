
# 交易系统的目标：概率，期望值
在概率论 <https://zh.wikipedia.org/wiki/%E6%A6%82%E7%8E%87%E8%AE%BA>和统计学 <https://zh.wikipedia.org/wiki/%E7%BB%9F%E8%AE%A1%E5%AD%A6>中，一个离散性随机变量 <https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F>的期望值（或数学期望、或均值，亦简称期望，物理学中称为期待值）是试验中每次可能结果的概率乘以其结果的总和 <https://zh.wikipedia.org/wiki/%E5%92%8C>。换句话说，期望值是随机试验在同样的机会下重复多次的结果计算出的等同“期望”的平均值。需要注意的是，期望值并不一定等同于常识中的“期望”——“期望值”也许与每一个结果都不相等。（换句话说，期望值是该变量输出值的平均数。期望值并不一定包含于变量的输出值集合里。）
例如，掷一枚六面骰子 <https://zh.wikipedia.org/wiki/%E9%AA%B0%E5%AD%90>，其点数的期望值是3.5，计算如下：
0776368257ee638d5b0048a7b9f652a7
3.5不属于可能结果中的任一个。
赌博 <https://zh.wikipedia.org/wiki/%E8%B5%8C%E5%8D%9A>是期望值的一种常见应用。例如，美国 <https://zh.wikipedia.org/wiki/%E7%BE%8E%E5%9B%BD>的轮盘 <https://zh.wikipedia.org/wiki/%E8%BD%AE%E7%9B%98>中常用的轮盘上有38个数字，每一个数字被选中的概率都是相等的。赌注一般押在其中某一个数字上，如果轮盘的输出值和这个数字相等，那么下赌者可以将相当于赌注35倍的奖金(原注包含在内)，若输出值和下压数字不同，则赌注就输掉了。因此，考虑到38种所有的可能结果，以1美元赌注押一个数字上获利的期望值为：
c3a2502de91576dd4937e09908a4f907
结果约等于-0.0526美元。也就是说，平均起来每赌1美元就会输掉5美分，即以1美元作赌注的期望值为0.9474美元。在赌博中，一场每位参与者获利期望为0（没有净利或净亏）的游戏通常会被叫做“公平竞赛”。
数学定义 [编辑 <https://zh.wikipedia.org/w/index.php?title=%E6%9C%9F%E6%9C%9B%E5%80%BC&action=edit&section=1>]
如果X是在概率空间 <https://zh.wikipedia.org/wiki/%E6%A6%82%E7%8E%87%E7%A9%BA%E9%97%B4>（Ω, P）中的一个随机变量 <https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E5%8F%98%E9%87%8F>，那么它的期望值E[X]的定义是：
df1fc745cf0d6851f8597cbf85cd5308
并不是每一个随机变量都有期望值的，因为有的时候这个积分不存在。如果两个随机变量的分布相同，则它们的期望值也相同。
如果X 是一个离散的随机变量，输出值为x1, x2, ...， 和输出值相应的概率为p1, p2, ...（概率和为1），若级数0cef29e1d7697d584d34b0c7aea0e011绝对收敛，那么期望值E[X]是一个无限数列的和。
00e49f0d9717f5f148198fa45eddfe67
上面赌博的例子就是用这种方法求出期望值的。
如果X的概率分布存在一个相应的概率密度函数 <https://zh.wikipedia.org/wiki/%E6%A6%82%E7%8E%87%E5%AF%86%E5%BA%A6%E5%87%BD%E6%95%B0>f（x），若积分62b122026db0a75a11e44f99e8bcb27c绝对收敛，那么X 的期望值可以计算为：
7698b7bafa085f5f9843e7406d6e1086。
是针对于连续的随机变量的，与离散随机变量的期望值的算法同出一辙，由于输出值是连续的，所以把求和改成了积分。
特性 [编辑 <https://zh.wikipedia.org/w/index.php?title=%E6%9C%9F%E6%9C%9B%E5%80%BC&action=edit&section=2>]
	•	期望值E 是一个线性函数 <https://zh.wikipedia.org/wiki/%E7%B7%9A%E6%80%A7%E5%87%BD%E6%95%B8>
34aa22f8e63ac42f960c8422f7f05d85
X 和Y 为在同一概率空间的两个随机变量(可以独立或者非独立)，a 和b 为任意实数 <https://zh.wikipedia.org/wiki/%E5%AE%9E%E6%95%B0>。
	•	一般的说，一个随机变量的函数的期望值并不等于这个随机变量的期望值的函数。
7bc1cb3a87ce1eacaab0903f9ba052c9
	•	在一般情况下，两个随机变量的积的期望值不等于这两个随机变量的期望值的积。特殊情况是当这两个随机变量是相互独立的时候（也就是说一个随机变量的输出不会影响另一个随机变量的输出）。
期望值的运用 [编辑 <https://zh.wikipedia.org/w/index.php?title=%E6%9C%9F%E6%9C%9B%E5%80%BC&action=edit&section=3>]
在统计学 <https://zh.wikipedia.org/wiki/%E7%BB%9F%E8%AE%A1%E5%AD%A6>中，当估算一个变量的期望值时，一个经常用到的方法是重复测量此变量的值，然后用所得数据的平均值来作为此变量的期望值的估计 <https://zh.wikipedia.org/w/index.php?title=%E4%BC%B0%E8%AE%A1&action=edit&redlink=1>。
在概率分布 <https://zh.wikipedia.org/wiki/%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83>中，期望值和方差 <https://zh.wikipedia.org/wiki/%E6%96%B9%E5%B7%AE>或标准差 <https://zh.wikipedia.org/wiki/%E6%A0%87%E5%87%86%E5%B7%AE>是一种分布的重要特征。
在经典力学 <https://zh.wikipedia.org/wiki/%E7%BB%8F%E5%85%B8%E5%8A%9B%E5%AD%A6>中，物体重心的算法与期望值的算法十分近似。


## 期望收益率

所谓期望收益率，就是估计未来收益率的各种可能结果，然后，用它们出现的概率对这些估计值做加权平均。
名词解释
￼
   <http://baike.baidu.cn/picview/1491167/1491167/0/f6428f8fe662dcb2503d927c.html>
参考图片[1]
期望收益率，又称为持有期收益率 <http://baike.baidu.cn/view/968944.htm>（HPR）指投资者持有一种理财产品 <http://baike.baidu.cn/view/1295765.htm>或投资组合 <http://baike.baidu.cn/view/194522.htm>期望在下一个时期所能获得的收益率。这仅仅是一种期望值，实际收益很可能偏离期望收益。
HPR=（期末价格 -期初价格+现金股息 <http://baike.baidu.cn/view/165090.htm>）/期初价格
编辑本段 <http://baike.baidu.cn/view/1491167.htm#>
期望收益率、必要收益率与实际收益率
期望收益率是投资者在投资时期望获得的报酬率，必要收益率是投资者愿意投资所要求的最低报酬率，实际收益率是投资者投资后所实际获得的报酬率。其实，收益率就是未来现金流折算成现值的折现率 <http://baike.baidu.cn/view/431166.htm>，换句话说，期望收益率是投资者将预期能获得的未来现金流折现成一个现在能获得的金额 <http://baike.baidu.cn/view/1578919.htm>的折现率 <http://baike.baidu.cn/view/431166.htm>。必要收益率是使未来现金流的净现值 <http://baike.baidu.cn/view/26468.htm>为0的折现率，显然，如果期望收益率小于必要收益率，投资者将不会投资。当市场均衡 <http://baike.baidu.cn/view/1579460.htm>时，期望收益率等于必要收益率。而实际收益率则是已经实现了的现金流折现成当初现值的折现率 <http://baike.baidu.cn/view/431166.htm>，可以说，实际收益率是一个后验收益率。
编辑本段 <http://baike.baidu.cn/view/1491167.htm#>
引申义
期望值的估算可以简单地根据过去该种金融资产 <http://baike.baidu.cn/view/965479.htm>或投资组合 <http://baike.baidu.cn/view/194522.htm>的平均收益 <http://baike.baidu.cn/view/460849.htm>来表示，或采用计算机模型模拟，或根据内幕消息 <http://baike.baidu.cn/view/728997.htm>来确定期望收益。当各资产的期望收益率等于各个情况下的收益率与各自发生的概率的乘积的和 。投资组合 <http://baike.baidu.cn/view/194522.htm>的期望收益率等于组合内各个资产的期望收益率的加权平均，权重是资产的价值与组合的价值的比例。


# 期望值法（Expectancy Method）
什么是期望值法
　　期望值法是通过计算项目净现值的期望值 <http://wiki.mbalib.com/wiki/%E6%9C%9F%E6%9C%9B%E5%80%BC>和净现值 <http://wiki.mbalib.com/wiki/%E5%87%80%E7%8E%B0%E5%80%BC>大于或等于零时的累计概率，来比较方案优劣、确定项目可行性和风险程度的方法。
[编辑 <http://wiki.mbalib.com/w/index.php?title=%E6%9C%9F%E6%9C%9B%E5%80%BC%E6%B3%95&action=edit&section=2>]
期望值法的步骤
　　采用期望值法进行概率分析 <http://wiki.mbalib.com/wiki/%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90>，一般需要遵循以下步骤：
　　1、选用净现值作为分析对象，并分析选定与之有关的主要不确定性 <http://wiki.mbalib.com/wiki/%E4%B8%8D%E7%A1%AE%E5%AE%9A%E6%80%A7>因素。
　　2、按照穷举互斥原则，确定各不确定性因素可能发生的状态或变化范围。
　　3、分别估算各不确定性因素每种情况下发生的概率。各不确定性因素在每种情况下的概率，必须小于等于1、大于等于零，且所有可能发生情况的概率之和必须等于l。这里的概率为主观概率 <http://wiki.mbalib.com/wiki/%E4%B8%BB%E8%A7%82%E6%A6%82%E7%8E%87>，是在充分掌握有关资料基础之上，由专家学者依据其自己的知识、经验经系统分析之后，主观判断作出的。
　　4、分别计算各可能发生情况下的净现值(NPV)。各年净现值期望值、整个项目寿命周期净现值的期望值、各年净现值期望值的计算公式为：
　　a748cb1abca0e56c40cc7455c1a27203
　　式中，E(NPVt)为第t年净现值期望值；Xit为第t年第i种情况下的净现值；Pit为第t年第i种情况发生的概率，n为发生的状态或变化范围数。
　　整个项目寿命周期净现值的期望值的计算公式为：
　　e0820346732d4a1f99a3b46cd18dc628
　　式中，E（NPV）为整个项目寿命周期净现值的期望值；i为折旧率 <http://wiki.mbalib.com/wiki/%E6%8A%98%E6%97%A7%E7%8E%87>；M为项目寿命周期长度，E（NPVT）为第t年净现值的期望值。
　　项目净现值期望值大于零，则项目 <http://wiki.mbalib.com/wiki/%E9%A1%B9%E7%9B%AE>可行，否则，不可行。
　　5、计算各年净现值标准差、整个项目寿命周期净现值的标准差 <http://wiki.mbalib.com/wiki/%E6%A0%87%E5%87%86%E5%B7%AE>或标准差系数 <http://wiki.mbalib.com/wiki/%E6%A0%87%E5%87%86%E5%B7%AE%E7%B3%BB%E6%95%B0>，各年净现值标准差的计算公式为：
　　0d097ff668a28bbf43bbe4f87df14762
　　式中，δt为第t年净现值的标准差，其它符号意义同前。
　　整个项目寿命周期的标准差计算公式为：
　　0b689408972f541b0f6a37f970e6692e
　　式中，δ为整个项目寿命周期的标准差。
　　净现值标准差反映每年各种情况下净现值的离散程度 <http://wiki.mbalib.com/wiki/%E7%A6%BB%E6%95%A3%E7%A8%8B%E5%BA%A6>和整个项目寿命周期各年净现值的离散程度，在一定的程度上，能够说明项目风险 <http://wiki.mbalib.com/wiki/%E9%A1%B9%E7%9B%AE%E9%A3%8E%E9%99%A9>的大小。但由于净现值标准差的大小受净现值期望值影响甚大，两者基本上呈同方向变动。因此，单纯以净现值标准差大小衡量项目风险性高低，有时会得出不正确的结论。为此需要消除净现值期望值大小的影响，利用下式计算整个项目寿命周期的标准差系数：
　　dc4dcf90ca1e4738a9f6606e7fbe0a4c
　　式中，V为标准差系数。一般地，V越小，项目的相对风险就越小，反之，项目的相对风险就越大。依据净现值期望值、净现值标准差和标准差系数，可以用来选择投资方案。判断投资方案优劣的标准是：期望值相同、标准差小的方案为优；标准差相同、期望值大的方案为优；标准差系数小的方案为优。
　　6、计算净现值大于或等于零时的累计概率。累计概率值越大，项目所承担的风险就越小。
　　7、对以上分析结果作综合评价，说明项目是否可行及承担风险性大小。
[编辑 <http://wiki.mbalib.com/w/index.php?title=%E6%9C%9F%E6%9C%9B%E5%80%BC%E6%B3%95&action=edit&section=3>]
期望值法应用示例[1] <http://wiki.mbalib.com/wiki/%E6%9C%9F%E6%9C%9B%E5%80%BC%E6%B3%95#_note-0>
　　【例】某投资者以25万元购买了一个商铺单位2年的经营权 <http://wiki.mbalib.com/wiki/%E7%BB%8F%E8%90%A5%E6%9D%83>，第一年净现金流量 <http://wiki.mbalib.com/wiki/%E5%87%80%E7%8E%B0%E9%87%91%E6%B5%81%E9%87%8F>可能为：22万元、18万元和14万元，概率分别为0.2、0.6和o.2；第二年净现金流量可能为：28万元、22万元和16万元，概率分别为O.15、0.7和0.15，若折现率为10％，问该购买商铺的投资是否可行。
　　【解】
　　8a247a311e020f0430d62eb5ab069760(万元)
　　e9339c42d48efe5feceba0f1c5a98e54(万元)
　　a12191b44083630895a9776e88fdb81d(万元)
　　06f429ce02031efbee6f06bd1280bbb2
　　65ea2cc669671a66ae204d381312dcd4
　　因此，该投资项目可行，且风险较小。
　　【例】某项目投资 <http://wiki.mbalib.com/wiki/%E9%A1%B9%E7%9B%AE%E6%8A%95%E8%B5%84>20万元，建设期1年。据预测 <http://wiki.mbalib.com/wiki/%E9%A2%84%E6%B5%8B>，经营期内的年收入可能为5、10、12.5万元，相应的概率为0.3、O.5和0.2。同时，预计受技术进步的影响，经营期可能为2、3、4、5年，对应的可能性为0.2、0.2、0.5和0.1。如果折现率为10％，对净现值作累计概率分析。
　　【解】以年收入为10万元，经营期4年为例。该投资项目的净现值为：
　　4a1a675ddd5d058ea41f1be17fe04a5e (元)。
　　其他各种情况下的净现值如图所示。
￼ <http://wiki.mbalib.com/wiki/Image:%E5%9B%BE_%E9%A1%B9%E7%9B%AE%E5%87%80%E7%8E%B0%E5%80%BC%E5%8F%8A%E5%85%B6%E6%A6%82%E7%8E%87%E5%88%86%E5%B8%83.jpg>
　　可以计算得出，该投资项目的净现值期望值为47916元，净现值大于零的累计概率P(NPV>0)为0.6.表明该项目可行。


# 提高期望值的方法

## 组合

投资组合的期望收益率与组成组合的各项资产的期望收益率是怎样的关系？
投资组合的期望收益率与组成组合的各项资产的期望收益率是怎样的关系？投资组合的标准差与组成组合的各项资产的标准差是怎样的关系？从中你如何解释组合投资能降低风险？
二、风险衡量
　　（一）概率
　　概率是用百分数或小数来表示随机事件发生可能性及出现结果可能性大小的数值。将随机事件各种可能的结果按一定的规则进行排列，同时列出各种结果出现的相应概率，这一完整的描述称为概率分布。概率分布可分为离散型分布与连续型分布两种类型。
　　（二）期望值
　　期望值是一个概率分布中的所有可能结果，以各自相对应的概率为权数计算的加权平均值。其计算公式为：

　　（三）离散程度
　　离散程度是用以衡量风险大小的指标。表示随机变量离散程度的指标主要有方差、标准离差和标准离差率等。
　　1.方差
　　方差是用来表示随机变量与期望值之间的离散程度的一个数值，其计算公式为：

　　2.标准离差
　　标准离差是反映概率分布中各种可能结果对期望值的偏离程度的一个数值。其计算公式为：

　　标准离差是以绝对数来衡量待决策方案的风险，在期望值相同的情况下，标准离差越大，风险越大；相反，标准离差越小，风险越小。标准离差的局限性在于它是一个绝对数，只适用于相同期望值决策方案风险程度的比较。
　　3.标准差率
　　标准离差率是标准离差与期望值之比。其计算公式为:

　　标准离差率是以相对数来衡量待决策方案的风险，一般情况下，标准离差率越大，风险越大；相反，标准离差率越小，风险越小。标准离差率指标的适用范围较广，尤其适用于期望值不同的决策方案风险程度的比较。

　　三、风险收益率
　　风险收益率是指投资者因冒风险进行投资而要求的、超过资金时间价值的那部分额外的收益率。风险收益率、风险价值系数和标准离差率之间的关系可用公式表示如下：
　　RR=b·V
　　式中：RR为风险收益率；b为风险价值系数；V为标准离差率。
　　在不考虑通货膨胀因素的情况下，投资的总收益率（R）为：
　　R=RF+RR=RF+b·V
　　上式中，R为投资收益率；RF为无风险收益率。其中无风险收益率RF可用加上通货膨胀溢价的时间价值来确定。在财务管理实务中，一般把短期政府债券（如短期国库券）的收益率作为无风险收益率。




有关期望收益率的投资组合的风险问题

请问：假设市场组合的期望收益率为15%，标准差为21%。无风险收益率为7%，一个被很好的分散化（没有非市场风险）期望收益率为16.6%的组合的风险是多少？
期望收益率=无风险利率+β*市场溢价
该组合的β=（16.6%-7%）/（15%-7%）=1.2

β就是该组合和市场组合的相关性：
该组合的风险为:=β*21%=25.2%

条件如下
现有A、B两种证券，有关指标如下，假设资本资产定价模型城里，计算市场组合的期望收益和无风险利率

证券A   E（R）：25%  贝塔系数：1.5
证券B   E(R):15% 贝塔系数：0.9

要有详细解题过程并说明理由   后面会再追加分为谢！
资本资产定价模型公式为    证券收益率=无风险收益率+贝塔值*（市场收益率—无风险收益率）
根据此公式，联立方程组
 
25%=无风险收益率+1.5*（市场收益率—无风险收益率）
15%=无风险收益率+0.9*（市场收益率—无风险收益率）
 
解得：市场收益率=1/6
          无风险收益率=0

小张投资了12万元和6万元分别购买理财产品A和理财产品B。A产品的期望收益率为16%，B产品的期望收益率为20%。另有一款期望收益率为25%的理财产品C，若小张希望自己的投资组合期望收益率不低于20%，则小张可以投资（   ）万元购买C产品。
10万 
也就是说投资C产品资金的5%，必须大于A产品所投资金的4%
120000*4%=4800元   4800/5%=96000元   因为要达到不低于20%的收益又以万元万单位所以要投10万的C产品。
(是否应该为一个范围？）