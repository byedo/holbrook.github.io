<!DOCTYPE html>
<html>
  <head>
    <!-- meta information -->
<meta charset="utf-8">
<meta name="description" 
      content="# 关系数据库，数据文件 还是 NoSQL股票行情数据具有如下特点：1. 数据量大       对于分析来说，至少需要5分钟数据。如果每天交易时间为4小时，每年250个交易日，则一支股票一年的行情数据量为60/5*4*250= 12k..." >
<meta name="author" content="Holbrook(wanghaikuo@gmail.com)">

<!-- Enable responsiveness on mobile devices-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<!-- title -->
<title>使用Oracle Berkeley DB持久化股票行情数据 &middot; 心内求法</title>

<!-- icons -->
<link rel="shortcut icon" href="/public/images/favicon.png" />

<!-- stylesheets -->
<link rel="stylesheet" href="/public/css/syntax.css">
<link rel="stylesheet" href="/public/css/responsive.gs.12col.css">
<link rel="stylesheet" href="/public/css/animate.min.css">
<link rel="stylesheet" href="/public/css/main.css">

<!-- Google fonts -->
<link rel="stylesheet" href="/public/css/googleapis.css">


<!-- font Awesome -->
<link href="/public/css/font-awesome.css" rel="stylesheet">


<!-- feed links -->
<link rel="alternate" href="http://thinkinside.tk/feed.xml" type="application/rss+xml" title="">

  </head>
  <body>
    <div class="container">
      <header class="top row gutters">
        <div class="col span_2" id="logo-container">
          <a href="/" id="actual-logo" title="心内求法" style="background-image: url(/public/images/logo.png);"></a>
        </div>
        <nav class="col span_10">
	
  
  <a href="/index.html" title="首页"
     >首页</a>
  
  
  <a href="/pages/archive.html" title="归档"
     >归档</a>
  
  
  <a href="/pages/categories.html" title="分类"
     >分类</a>
  
  
  <a href="/pages/tags.html" title="标签"
     >标签</a>
  
  
  <a href="/feed.xml" title="订阅"
     >订阅</a>
  
  
  <a href="http://www.wumii.com/auto_app/download/nbn2Kljo" title="手机版"
     >手机版</a>
  
</nav>

      </header>

      <style>
.top_line {
  border-top: 1px solid #b3b3b3;
  border-top-width: 1px;
  border-top-style: solid;
  border-top-color: rgb(179, 179, 179);
}

.bottom_line {
  border-bottom: 1px solid #b3b3b3;
  border-bottom-width: 1px;
  border-bottom-style: solid;
  border-bottom-color: rgb(179, 179, 179);
}

</style>

<article class="single-post row gutters bottom_line">
  <div class="bottom_line">
  <h1 style="font-size: 2em;">使用Oracle Berkeley DB持久化股票行情数据</h1>
  <p>摘要：<br/></p>

  <time class="published" datetime="2013-12-19">2013-12-19
  
&sdot; 分类：
  
    <a href="/pages/categories.html#量化金融-ref">量化金融</a>
    <sup>4</sup>
    &nbsp;
  

  &sdot; 标签： 
  
    <a href="/pages/tags.html#交易系统-ref">交易系统</a>
    <sup>4</sup>
    &nbsp;
  
    <a href="/pages/tags.html#NoSQL-ref">NoSQL</a>
    <sup>5</sup>
    &nbsp;
  

  </time>
</div>

  

  <h1>关系数据库，数据文件 还是 NoSQL</h1>

<p>股票行情数据具有如下特点：</p>

<ol>
<li><p>数据量大</p>

<p>对于分析来说，至少需要5分钟数据。如果每天交易时间为4小时，每年250个交易日，则一支股票一年的行情数据量为60/5<em>4</em>250= 12k。20年则为240k。如果是1分钟数据，则20年的数据量为240k*5 = 1.2M。</p>

<p>所以，如果用于分析，行情数据将是百万量级。如果记录3000只股票/指数的数据，数据量会非常大。</p></li>
<li><p>数据很少变化</p>

<p>由于都是历史数据，行情数据很少需要修改。主要的操作是查询和增加。</p></li>
<li><p>数据结构简单</p>

<p>主要考虑<a href="/2013/12/18/quotation_model.html#menuIndex2">成交数据</a>，是一种简单的一维结构。价格数据只在发生交易信号时有一定的参考意义，不需要保留所有的历史记录。</p></li>
</ol>


<p>由于行情数据的这些特点，通常不适合使用关系数据库。传统上一般采用数据文件进行存储。</p>

<p>但是用数据文件需要自己处理写入锁，随机读写，序列化等问题，比较麻烦。于是<a href="/2013/12/18/nosql_list.html#menuIndex1">NoSQL</a>成了比较好的一种选择。</p>

<p>对于单机的分析软件，<a href="/2013/12/18/nosql_list.html#menuIndex2">NoSQL选型要素</a>为：</p>

<ul>
<li>key/value儲存</li>
<li>支持持久化</li>
<li>支持嵌入式</li>
<li>接口方便</li>
</ul>


<h1>Oracle Berkeley DB</h1>

<p><a href="http://www.oracle.com/technetwork/cn/products/berkeleydb/overview/index.html">Berkeley DB</a>是满足上述4点要求的比较好的一款产品。Berkeley DB分为BDB、BDB Java版和BDB XML版。其总体架构如下图：</p>

<p><img src="/images/trade-system/berkeley-db.png" alt="Berkeley DB" /></p>

<p>BDB的三个版本的功能不完全相同。</p>

<p>我选择BDB Java版，不支持SQL API和XQuery API，可以使用底层的键/值API、Java 直接持久层 (DPL) API和Java 集合 API。三种API的应用场景如下：</p>

<ul>
<li>当 Java 类是用来代表应用中的域对象(domain objects),也就是说,该模式是相对 稳定的,建议用直接持久层。</li>
<li>当在Berkeley DB和Berkeley DB Java 版之间移植应用程序时,或当实现自己的 动态模式(举例来说,一个 LDAP 服务器),那么建议用基础 API。您也可能喜欢使用这 个基础API如果您有极少数域类(domain class)。</li>
<li>集合API有利于和外部组件交互,因为它遵从Java集合框架标准。继而,和基础API 以及直接持久层结合后会很有用。您可能会喜欢这个 API,因为它提供了熟悉的 Java 集 合接口。</li>
</ul>


<p>在行情数据的持久化中，可以选用直接持久层（DPL）。直接持久层API 可以持久化以及还原相互关联的 Java 对象，但是比ORM更加简单高效。</p>

<h1>实现过程</h1>

<h2>获取开发包</h2>

<p>可以从<a href="http://www.oracle.com/technetwork/cn/products/berkeleydb/downloads/index.html">这里</a>下载需要的jar包，也可以使用maven：</p>

<div class="highlight"><pre><code class="xml"> 
<span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.sleepycat<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>je<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>5.0.73<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>


<p>如果要使用最新版（目前的最新版是5.0.97），需要引入oracle的maven库：</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;repositories&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>oracleReleases<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>Oracle Released Java Packages<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://download.oracle.com/maven<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;layout&gt;</span>default<span class="nt">&lt;/layout&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/repositories&gt;</span>
</code></pre></div>


<h2>定义持久化模型</h2>

<h3>实体和值对象</h3>

<p>Berkeley DB支持DDD(领域驱动设计)中的实体和值对象的持久化。</p>

<ul>
<li>实体：拥有长期不变的标识符,可以被跟踪的对象。</li>
<li>值对象：没有标识符，主要关注其属性的对象。</li>
</ul>


<p>在BDB中，分别使用 <strong>@Entity</strong> 和 <strong>@Persistent</strong> 来声明实体和值对象。
声明了 <strong>@Persistent</strong> 的对象可以直接作为 <strong>@Entity</strong> 对象中的属性使用。</p>

<p>任何Java类一旦增加了持久化声明，其所有字段（任何作用域）都会被持久化。需要持久化的类需要缺省的无参数构造函数。</p>

<p>比如：</p>

<div class="highlight"><pre><code class="java"><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Transaction</span> <span class="o">{</span>
    <span class="err">……</span>
    <span class="kd">public</span> <span class="n">OHLC</span> <span class="n">ohlc</span><span class="o">;</span>
    <span class="err">……</span>
<span class="o">}</span>


<span class="nd">@Persistent</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OHLC</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">float</span> <span class="n">open</span><span class="o">,</span><span class="n">high</span><span class="o">,</span><span class="n">low</span><span class="o">,</span><span class="n">close</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div>


<h3>主键和“次键”声明</h3>

<p>每个实体类(@Entity)可以定义一个主键(PrimaryKey)和多个次键(SecondaryKey)，从而可以按照主键或次键进行索引。例如：</p>

<div class="highlight"><pre><code class="java"><span class="nd">@Entity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Security</span> <span class="kd">implements</span> <span class="n">Instrument</span><span class="o">{</span>
    <span class="nd">@PrimaryKey</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">code</span><span class="o">;</span>
    
    <span class="nd">@SecondaryKey</span><span class="o">(</span><span class="n">relate</span><span class="o">=</span><span class="n">Relationship</span><span class="o">.</span><span class="na">ONE_TO_ONE</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="err">……</span>
<span class="o">}</span>
</code></pre></div>


<h3>关联关系</h3>

<p>关联关系也是通过次键(SecondaryKey)声明的。需要同时指定多重性（relate）和关联到的实体（relatedEntity）。
relate可以是ONE_TO_ONE,ONE_TO_MANY,MANY_TO_ONE或MANY_TO_MANY(在com.sleepycat.persist.model.Relationship中定义)。</p>

<p>需要注意的是，次键的属性类型需要是relatedEntity指定的对端实体的主键类型，而不能直接使用对端实体。</p>

<p>如果relate是ONE_TO_MANY或MANY_TO_MANY，可以使用集合类型。比如（不属于股票行情数据模型，而是BDB官方例子）：</p>

<div class="highlight"><pre><code class="java"><span class="nd">@Entity</span>
<span class="kd">class</span> <span class="nc">Employer</span> <span class="o">{</span>
    <span class="nd">@PrimaryKey</span><span class="o">(</span><span class="n">sequence</span><span class="o">=</span><span class="s">&quot;ID&quot;</span><span class="o">)</span>
    <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>

    <span class="nd">@SecondaryKey</span><span class="o">(</span><span class="n">relate</span><span class="o">=</span><span class="n">ONE_TO_ONE</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="err">……</span>
<span class="o">}</span>


<span class="nd">@Entity</span>
<span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="nd">@PrimaryKey</span>
    <span class="n">String</span> <span class="n">ssn</span><span class="o">;</span>

    <span class="nd">@SecondaryKey</span><span class="o">(</span><span class="n">relate</span><span class="o">=</span><span class="n">MANY_TO_ONE</span><span class="o">,</span> <span class="n">relatedEntity</span><span class="o">=</span><span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> 
    <span class="n">String</span> <span class="n">parentSsn</span><span class="o">;</span>

    <span class="nd">@SecondaryKey</span><span class="o">(</span><span class="n">relate</span><span class="o">=</span><span class="n">ONE_TO_MANY</span><span class="o">)</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">emailAddresses</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>

    <span class="nd">@SecondaryKey</span><span class="o">(</span><span class="n">relate</span><span class="o">=</span><span class="n">MANY_TO_MANY</span><span class="o">,</span> <span class="n">relatedEntity</span><span class="o">=</span><span class="n">Employer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">onRelatedEntityDelete</span><span class="o">=</span><span class="n">NULLIFY</span><span class="o">)</span>
    <span class="n">Set</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;</span> <span class="n">employerIds</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">&gt;();</span>
    <span class="err">……</span>
<span class="o">}</span>
</code></pre></div>


<h2>使用DPL API</h2>

<h3>设计Accessor(TODO)</h3>

<p>类似于DAO，BDB中通常将对实体的访问封装到Accessor中。例如：</p>

<ol>
<li><p>EntityStore</p></li>
<li><p>获取索引</p></li>
<li><p>CRUD</p></li>
<li><p>访问关联对象</p></li>
</ol>


<p>通过索引可以得到关联的对象，无论是单个关联对象还是集合。</p>

<ul>
<li>关联到单个对象</li>
<li>关联到集合</li>
</ul>


<div class="highlight"><pre><code class="java"><span class="n">EntityCursor</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">employees</span> <span class="o">=</span> <span class="n">dao</span><span class="o">.</span><span class="na">personByEmployerIds</span><span class="o">.</span><span class="na">subIndex</span><span class="o">(</span><span class="n">gizmoInc</span><span class="o">.</span><span class="na">id</span><span class="o">).</span><span class="na">entities</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Person</span> <span class="n">employee</span> <span class="o">:</span> <span class="n">employees</span><span class="o">)</span> <span class="o">{</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">employee</span><span class="o">.</span><span class="na">ssn</span> <span class="o">+</span> <span class="sc">&#39; &#39;</span> <span class="o">+</span> <span class="n">employee</span><span class="o">.</span><span class="na">name</span><span class="o">);</span> <span class="o">}</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">employees</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>


<ul>
<li>等值连接</li>
</ul>


<p>通过 EntityJoin 类可以进行等值连 接(equality join)操作。</p>

<p>比如，以下代码查询所有Bob的孩子中为gizmo公司工作的 员工:</p>

<div class="highlight"><pre><code class="java"><span class="n">EntityJoin</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">join</span> <span class="o">=</span> <span class="k">new</span> <span class="n">EntityJoin</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">personBySsn</span><span class="o">);</span>
<span class="n">join</span><span class="o">.</span><span class="na">addCondition</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">personByParentSsn</span><span class="o">,</span> <span class="s">&quot;111-11-1111&quot;</span><span class="o">);</span> <span class="n">join</span><span class="o">.</span><span class="na">addCondition</span><span class="o">(</span><span class="n">dao</span><span class="o">.</span><span class="na">personByEmployerIds</span><span class="o">,</span> <span class="n">gizmoInc</span><span class="o">.</span><span class="na">id</span><span class="o">);</span>
<span class="n">ForwardCursor</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">join</span><span class="o">.</span><span class="na">entities</span><span class="o">();</span> <span class="k">try</span> <span class="o">{</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Person</span> <span class="n">person</span> <span class="o">:</span> <span class="n">results</span><span class="o">)</span> <span class="o">{</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">person</span><span class="o">.</span><span class="na">ssn</span> <span class="o">+</span> <span class="sc">&#39; &#39;</span> <span class="o">+</span> <span class="n">person</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
<span class="o">}</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
    <span class="n">results</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>


<h3>建立连接</h3>

<h3>事务支持</h3>

<div class="highlight"><pre><code class="java"><span class="n">Transaction</span> <span class="n">txn</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">beginTransaction</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span> <span class="n">dao</span><span class="o">.</span><span class="na">employerById</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">txn</span><span class="o">,</span> <span class="n">gizmoInc</span><span class="o">);</span> <span class="n">dao</span><span class="o">.</span><span class="na">employerById</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">txn</span><span class="o">,</span> <span class="n">gadgetInc</span><span class="o">);</span>
<span class="n">txn</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
</code></pre></div>


<h3>模型变化</h3>

<p>对于增加实体或值对象的属性，改变属性类型等变化，一般不需要对BDB进行额外的处理，而是会自动适应。</p>

<p>对于一些特殊的、无法自动适应的变化，比如重命名字段或优化单个的类(如:使用通用类型,模块复用等改变),可以使用Mutations。</p>

<p>Mutations 操作是延迟的:只在存取数据时自动改变,故避免了软件升级时大型数据库转换导致的长时间停机。
复杂的类优化可能涉及到多个类,使用 ConversionStore 进行。因而,无论持久化类作出何种 改变,直接持久层都始终提供可靠数据存取。</p>

<h3>性能选项</h3>

<p>Berkeley DB在API的很多地方提供了性能调优的选项。常见的包括：</p>

<ul>
<li><p>DatabaseConfig参数</p>

<p>通过DatabaseConfig参数可以用来调整Berkeley DB引擎的性能。
比如,可指定内部B树节点的大小来调整性能,通过如下方式来指定:</p></li>
</ul>


<div class="highlight"><pre><code class="java">    <span class="n">DatabaseConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="na">getPrimaryConfig</span><span class="o">(</span><span class="n">Employer</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> 
    <span class="n">config</span><span class="o">.</span><span class="na">setNodeMaxEntries</span><span class="o">(</span><span class="mi">64</span><span class="o">);</span>
    <span class="n">store</span><span class="o">.</span><span class="na">setPrimaryConfig</span><span class="o">(</span><span class="n">config</span><span class="o">);</span>
</code></pre></div>


<ul>
<li><p>CRUD操作参数</p>

<p>例如, “脏读”可通过LockMode参数实现:</p>

<p>  Employer employer = employerByName.get(null, "Gizmo Inc", LockMode.READ_UNCOMMITTED);</p></li>
</ul>


  <!--百度分享 BEGIN-->
<div class="bdsharebuttonbox" class="top_line">
  <a href="#" class="bds_more" data-cmd="more">分享到：</a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博">新浪微博</a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间">QQ空间</a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博">腾讯微博</a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网">人人网</a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信">微信</a></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{"bdSize":16},"image":{"viewList":["tsina","qzone","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
<!--百度分享 END-->

      <!--  评论  -->
      <div class="row-fluid">
        
          <!-- UY BEGIN -->
          <div id="uyan_frame"></div>
          <script type="text/javascript" id="UYScript" src="http://v1.uyan.cc/js/iframe.js?UYUserId=1784345" async="true"></script>
          <!-- UY END -->
        
      </div>
      <!--  评论  END -->





</article>

 <!--上一篇，下一篇-->
      <div class="row-fluid">
      
        <div class="span6">
          <a href="/2013/12/19/trading_strategy.html" rel="bookmark">&laquo;&nbsp;下一篇：交易策略与规则引擎</a>
        </div>
      

      
        <div class="span6">
        <a class="pull-right" href="/2013/12/18/quotation_model.html" rel="bookmark">上一篇：证券行情数据模型&nbsp;&raquo;</a>
        </div>
      
      </div>
      <!--上一篇，下一篇 END-->


<!--wumii block-->
          <script type="text/javascript" id="wumiiRelatedItems"></script>


          <!--for wumii ， can be moved to footer-->
         <script type="text/javascript">
            var wumiiPermaLink = "http://thinkinside.tk/2013/12/19/Berkeley_DB.html"; //请用代码生成文章永久的链接
            var wumiiTitle = "使用Oracle Berkeley DB持久化股票行情数据"; //请用代码生成文章标题
            var wumiiTags = "心内求法,交易系统,NoSQL"; //请用代码生成文章标签，以英文逗号分隔，如："标签1,标签2"
            var wumiiCategories = ["量化金融"]; //请用代码生成文章分类，分类名放在 JSONArray 中，如: ["分类1", "分类2"]
            var wumiiSitePrefix = "http://www.thinkinside.tk/";
            var wumiiParams = "&num=5&mode=3&pf=JAVASCRIPT";
        </script>
        <script type="text/javascript" src="http://widget.wumii.cn/ext/relatedItemsWidget" async="true"></script>
        <a href="http://www.wumii.com/widget/relatedItems" style="border:0;">
            <img src="http://static.wumii.cn/images/pixel.png" alt="无觅相关文章插件，快速提升流量" style="border:0;padding:0;margin:0;" />
        </a>
        <!--end of wumii-->


    </div>
    
    <footer>
       <div class="row">
      <div class="col span_7">
        <p><h4 class="footer-title">心内求法</h4>
        制心一境，住心观性，澄心外照，摄心内证</p>
        
        <p>&copy; Copyright 2014  <a herf='mailto:wanghaikuo@gmail.com'>Holbrook Wong</a>. 
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank">署名-非商业性使用-相同方式共享</a> 
        </p>
        

        <a rel="license nofollow" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" target="_blank"><img alt="知识共享许可协议" style="border-width:0" src="/public/images/footer_cc.png" /></a>

        <a rel="nofollow" href="http://www.alexa.com/siteinfo/thinkinside.tk" target="_blank" class="AlexaSiteStatsWidget"></a>

        <!-- Site Meter -->
        <script type="text/javascript" src="http://s51.sitemeter.com/js/counter.js?site=s51thinkinside" async="true">
        </script>
        <noscript>
        <a href="http://s51.sitemeter.com/stats.asp?site=s51thinkinside" target="_top">
        <img src="http://s51.sitemeter.com/meter.asp?site=s51thinkinside" alt="Site Meter" border="0"/></a>
        </noscript>
      </div> <!-- /span8 -->

      <div class="col span_5">
          <h3>关于</h3>
          <iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=75&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=1878878250&verifier=b193b9de&dpc=1"></iframe>
          
          <h5>我以前的博客</h5>
          <a href="http://www.cnblogs.com/holbrook/" target="_blank">@博客园</a>(2012.2--2013.5)<br/>
          <a href="http://blog.csdn.net/thinkinside/" target="_blank">@CSDN</a>(2007.7--2012.2)<br/>
          <a href="http://www.blogjava.net/wanghaikuo" target="_blank">@blogjava</a>(2006.10--2007.7)
        </div>
      </div>
    </div>
 
    </footer>

    <!-- scripts -->
    <!--百度统计-->
    <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fb942c9f7549938d471dbef766d4b4792' type='text/javascript'%3E%3C/script%3E"));
    </script>
    
    <script src="/public/js/jquery-1.10.2.min.js"></script>
    <script src="/public/js/jquery.fitvids.min.js"></script>
    <script>
      $(document).ready(function(){
        $("article").fitVids();
      });
    </script>
  </body>
</html>
