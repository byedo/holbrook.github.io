---
tags:
  - CI
layout: post
title: 理解Hudson的“Job”
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. 选择Hudson的理由</a></li>
<li><a href="#sec-2">2. Job模型</a>
<ul>
<li><a href="#sec-2-1">2.1. Job基本信息</a></li>
<li><a href="#sec-2-2">2.2. 源代码管理</a></li>
<li><a href="#sec-2-3">2.3. 触发条件</a></li>
<li><a href="#sec-2-4">2.4. 构建步骤</a></li>
<li><a href="#sec-2-5">2.5. 后续行动</a></li>
</ul>
</li>
<li><a href="#sec-3">3. 参考资料</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 选择Hudson的理由</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>安装非常简单（一个war包，不需要数据库)
</li>
<li>基于java，但不限于java工程
</li>
<li>支持插件，易于扩展
</li>
<li>支持分布式部署
</li>
<li>界面友好
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Job模型</h2>
<div class="outline-text-2" id="text-2">

<div class="figure">
<p><img src="/assets/images/hudson_job.png" alt="hudson_job.png" />
</p>
</div>

<p>
Hudson的Job模型是高度抽象的，不仅可以用于软件构建，也可以用于其他场合。下面只列出Hudson的要素和简单描述，详细的说明可以参考《Continuous integration with Hudson》<sup><a id="fnr.1" name="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Job基本信息</h3>
<div class="outline-text-3" id="text-2-1">

<div class="figure">
<p><img src="/./assets/images/17217iMv.png" alt="17217iMv.png" />
</p>
</div>

<p>
一些主要的属性解释如下：
</p>

<ul class="org-ul">
<li>name

<p>
项目名称
</p>
</li>

<li>description

<p>
描述
</p>
</li>

<li>Discard old builds

<p>
是否删除以前的构建结果(不勾选为“保留”)。可以按照天数和构建的数量进行删除。
</p>
</li>

<li>This build is parameterized

<p>
如果选中，可以设置一些构建的参数。
</p>
</li>

<li>Disable build

<p>
禁止执行(新的)构建。以适应某些特殊情况，比如大规模重构期间，服务器维护期间等。
</p>
</li>

<li>Execute concurrent builds if necessary

<p>
如果指定了工程之间的依赖关系，选中这个选项可以自动执行相关工程的构建。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 源代码管理</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Hudson可以从多种SCM中获取源代码，具体支持的种类取决于安装了哪些插件。
</p>


<div class="figure">
<p><img src="/./assets/images//344aYv.png" alt="344aYv.png" />
</p>
</div>


<p>
Hudson中的一个 <code>Job</code> 可以从多个代码库(Repositories)的多个分支(Branches)执行构建。
</p>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 触发条件</h3>
<div class="outline-text-3" id="text-2-3">
<p>
可以指定开始执行Job构建的触发器，包括：
</p>

<ul class="org-ul">
<li>Build after other jobs are built

<p>
某个指定的其他Job构建完成后执行。
</p>
</li>

<li>Poll SCM

<p>
根据指定的时间间隔(cron语法)检查版本库。如果发现变化，就执行一次构建。
</p>

<p>
Build periodically        Help for feature: Build periodically
Build when Maven dependencies have been updated by Maven 3 integration
</p>
</li>

<li>Build periodically

<p>
根据指定的时间间隔(cron语法)执行构建，不管版本库中的代码是否有变化。
可以用于在经常变化的测试环境中执行测试用例。
</p>
</li>

<li>Build when Maven dependencies have been updated by Maven 3 integration

<p>
当maven依赖关系发生变化时执行构建。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> 构建步骤</h3>
<div class="outline-text-3" id="text-2-4">

<div class="figure">
<p><img src="/./assets/images//344ni1.png" alt="344ni1.png" />
</p>
</div>

<p>
一个Job可以有多个步骤。每个步骤可以是maven、ant、shell脚本或bat脚本等。
</p>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> 后续行动</h3>
<div class="outline-text-3" id="text-2-5">

<div class="figure">
<p><img src="/./assets/images//344nwd.png" alt="344nwd.png" />
</p>
</div>

<p>
还可以指定构建完成之后的一些行为，比如发布单元测试报告、启动其他Job、邮件通知等。
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> 参考资料</h2>
<div class="outline-text-2" id="text-3">
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" name="fn.1" class="footnum" href="#fnr.1">1</a></sup> <p class="footpara">
<a href="http://www.javaworld.com/article/2077956/open-source-tools/continuous-integration-with-hudson.html">Continuous integration with Hudson</a>
</p></div>


</div>
</div>
