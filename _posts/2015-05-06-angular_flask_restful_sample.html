---
layout: post
title: AngularJS+Flask的例子



category: 软件开发
tags: [angularjs, flask, scrum, ]
---
<div id="TOC">
<h3>目录</h3>
<ul>
<li><a><span class="toc-section-number">1</span> 用户故事</a></li>
<li><a><span class="toc-section-number">2</span> 领域模型</a></li>
<li><a><span class="toc-section-number">3</span> 开发准备</a></li>
<li><a><span class="toc-section-number">4</span> RESTfulAPI 与 前后端分离</a></li>
<li><a><span class="toc-section-number">5</span> 后端开发</a><ul>
<li><a><span class="toc-section-number">5.1</span> models</a></li>
<li><a><span class="toc-section-number">5.2</span> services</a></li>
<li><a><span class="toc-section-number">5.3</span> views</a></li>
<li><a><span class="toc-section-number">5.4</span> 后端测试用例</a></li>
</ul></li>
<li><a><span class="toc-section-number">6</span> 前端开发</a><ul>
<li><a><span class="toc-section-number">6.1</span> 安装需要的插件</a></li>
<li><a><span class="toc-section-number">6.2</span> 配置app.js</a></li>
<li><a><span class="toc-section-number">6.3</span> 脚手架</a></li>
<li><a><span class="toc-section-number">6.4</span> 实现RESTful API调用</a></li>
<li><a><span class="toc-section-number">6.5</span> 添加测试数据</a></li>
<li><a><span class="toc-section-number">6.6</span> 编写html模板</a></li>
<li><a><span class="toc-section-number">6.7</span> 前端测试</a></li>
</ul></li>
<li><a><span class="toc-section-number">7</span> 集成测试</a></li>
<li><a><span class="toc-section-number">8</span> 参考资料</a></li>
</ul>
</div>
<h1><span class="header-section-number">1</span> 用户故事</h1>
<blockquote>
<p>scrum的用户故事要有弹性，要能够容纳变化。要素：用户角色、功能需求、目的、测试要点。 一个有用的模板如下： 作为【用户的类型】，我希望可以【先这样做，然后那样做，就应该得到...的结果】以便【业务价值】。 用户故事只描述一个功能（feature），而且每个用户故事的开发周期不要太长（1－5天）</p>
</blockquote>
<p>本文中的用户故事如下：</p>
<blockquote>
<p>作为运维人员，我希望可以通过web界面管理salt-key，包括查询、添加、删除等， 这样我就不用每次都登录到master服务器进行相应的操作。</p>
</blockquote>
<h1><span class="header-section-number">2</span> 领域模型</h1>
<p>敏捷方法并不排斥设计和建模。实际上，领域模型及可以对用户故事进行抽象，也可以帮助发现用户故事。</p>
<p>本文中，salt master 管理 salt minion。而minion实际上是一个主机(Host, 包括虚拟机Virtual Host)。 Host 安装了 salt-minion 后，通过 minion-id 向 salt-master 注册自己，而 salt-master 决定是否 接受该minion的注册请求。</p>
<p>如果从整个项目（运维操作平台）的视角来看，我们要管理的不仅仅是主机，甚至后续 grains 信息中的操作系统、IP地址等， 以及通过state安装的平台软件，都是需要管理的资源。资源还可能包括网络设备、子网等物理、虚拟资源。</p>
<p>所以有必要抽象出一个【资源】的实体，【主机】是【资源】的一个子类，【主机】可以有=minion-id=属性。 salt master 维护了salt keys的清单，包括 =Accepted Keys=、=Unaccepted Keys=、=Rejected Keys=。</p>
<p>领域模型的设计如下：</p>
<p><img src="data:image/png;base64,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" /></p>
<p>其中=SaltKeyService=通过调用=salt-key=命令，执行list、accept、reject等操作，并根据操作结果更改=Host=实体。</p>
<p>=list()=操作，后续可以加入到定时任务。</p>
<h1><span class="header-section-number">3</span> 开发准备</h1>
<p>这部分内容不属于本文，但作为[[][一系列开发培训]]的一部分，这里再次强调一下版本管理：</p>
<pre class="sourceCode bash"><code class="sourceCode bash">    <span class="kw">git</span> pull  <span class="co"># 获取最新版本</span>
    <span class="kw">git</span> checkout -b feature-admin_minion develop <span class="co"># 基于develop 分支创建 feature-admin_minion 分支</span>
    <span class="kw">git</span> push origin feature-admin_minion <span class="co">#提交分支</span></code></pre>
<h1><span class="header-section-number">4</span> RESTfulAPI 与 前后端分离</h1>
<p>为了前后端分离，本项目中 Angular 和 Flask 通过 RESTful API 进行整合。所以有了领域模型之后，就要进行RESTful API设计。 具体Endpoint设计如下：</p>
<ul>
<li>/resource/hosts
<ul>
<li>GET: 查询所有的主机。允许的查询条件(query_params)：limit,offset,sortby,order,properties</li>
<li>POST: 增加新的主机</li>
</ul></li>
<li><em>resource/hosts</em>
<ul>
<li>PUT: 更新主机信息</li>
<li>DELETE: 删除主机</li>
</ul></li>
</ul>
<p>基于API，前端开发人员可以在API_ROOT文件夹中增加静态json文件来调试，而后端开发人员可以通过对应的URL进行检验。</p>
<h1><span class="header-section-number">5</span> 后端开发</h1>
<h2><span class="header-section-number">5.1</span> models</h2>
<p>本项目中使用了 Flask-SQLAlchemy 插件。模型的代码如下(由于Resource容易引起歧义，模型中使用=OpsResource=以便区分)：</p>
<pre class="sourceCode python"><code class="sourceCode python">    <span class="ch">from</span> ops <span class="ch">import</span> db
    <span class="kw">class</span> OpsResource(db.Model):
        <span class="dt">id</span> = db.Column(db.Integer, primary_key=<span class="ot">True</span>)
        comment = db.Column(db.Text)

    <span class="kw">class</span> Host(OpsResource):
        <span class="dt">id</span> = db.Column(db.Integer, db.ForeignKey(<span class="st">'ops_resource.id'</span>), primary_key=<span class="ot">True</span>)
        hostname = db.Column(db.String(<span class="dv">50</span>))
        virtual = db.Column(db.String(<span class="dv">50</span>))
        minionid = db.Column(db.String(<span class="dv">50</span>))
        keystate = db.Column(db.Enum(<span class="st">'Accepted'</span>, <span class="st">'Unaccepted'</span>,<span class="st">'Rejected'</span>, name=<span class="st">'SALT_KEY_STATE'</span>))
</code></pre>
<p>创建数据库的脚本=createdb.py=如下：</p>
<pre class="sourceCode python"><code class="sourceCode python">    <span class="ch">import</span> os,sys
    root = os.path.dirname(<span class="ot">__file__</span>)
    sys.path.insert(<span class="dv">0</span>, os.path.join(root, <span class="st">'./'</span>))

    <span class="ch">from</span> ops <span class="ch">import</span> app,db

    <span class="ch">import</span> config

    app.config.from_object(<span class="st">'config.DevelopmentConfig'</span>)

    db.create_all()</code></pre>
<h2><span class="header-section-number">5.2</span> services</h2>
<p>略</p>
<h2><span class="header-section-number">5.3</span> views</h2>
<p>本项目中使用了 Flask-RESTful 插件。注册view的代码为：</p>
<pre class="sourceCode python"><code class="sourceCode python">    <span class="ch">from</span> flask.ext.restful <span class="ch">import</span> Api
    <span class="ch">from</span> ops <span class="ch">import</span> app

    <span class="ch">from</span> resource <span class="ch">import</span> *

    API_ROOT = <span class="st">'/api/'</span>
    api = Api(app)

    api.add_resource(HostResource, API_ROOT+<span class="st">'resource/hosts'</span>, API_ROOT+<span class="st">'resource/hosts/&lt;int:id&gt;'</span>)</code></pre>
<p>实现view的代码如下：</p>
<pre class="example"><code>
    from flask import request
    from flask.ext.restful import abort, Resource, fields, marshal_with, marshal
    import json

    from ops.models import Host
    from ops.services import SaltService

    host_fields = {
            'id': fields.Integer,
            'hostname': fields.String,
            'minionid': fields.String,
            'keystate': fields.String,
            'virtual': fields.String,
            'comment': fields.String,
        }

    class HostResource(Resource):
        @marshal_with(host_fields)

        def get(self, id=None):
            salt = SaltService()
            salt.list()

            if not id:
                hosts = Host.query.all()
            else:
                hosts = Host.query.filter_by(id=id).first()
            return hosts

        def post(self):
            host = marshal(request.data, host_fields)
            db.session.add(host)
            db.session.commit()

            return {'msg':'post successfully! '}


        def delete(self, id):
            pass

        def put(self, id):
            pass
</code></pre>
<h2><span class="header-section-number">5.4</span> 后端测试用例</h2>
<p>(TODO)</p>
<h1><span class="header-section-number">6</span> 前端开发</h1>
<h2><span class="header-section-number">6.1</span> 安装需要的插件</h2>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">cd</span> PROJ_ROOT/web
<span class="kw">bower</span> install angular-bootstrap -S
<span class="kw">bower</span> install restangular -S</code></pre>
<h2><span class="header-section-number">6.2</span> 配置app.js</h2>
<pre class="sourceCode javascript"><code class="sourceCode javascript">angular
  .<span class="fu">module</span>(<span class="st">'webApp'</span>, [
    ...
    <span class="st">'ui.bootstrap'</span>,
    <span class="st">'restangular'</span>,
    ...
  ])
  .<span class="fu">run</span>(<span class="kw">function</span> (){
    <span class="ot">console</span>.<span class="fu">log</span>(<span class="st">'app run'</span>);

  })
  .<span class="fu">config</span>(<span class="kw">function</span> ($routeProvider,RestangularProvider) {
    <span class="ot">console</span>.<span class="fu">log</span>(<span class="st">'app config'</span>);
    <span class="ot">RestangularProvider</span>.<span class="fu">setBaseUrl</span>(<span class="st">'/api/'</span>);

    $routeProvider
      .<span class="fu">when</span>(
    ...</code></pre>
<h2><span class="header-section-number">6.3</span> 脚手架</h2>
<pre class="example"><code>    yo angular:route host/list
</code></pre>
<p>会自动在=scripts/app.js=中增加路由，创建=scripts/host/list.js=、=views/host/list.html=文件，并在=index.html= 中增加=scripts/host/list.js=的引用。</p>
<p>此时已经可以访问 <a href="http://0.0.0.0:9000/#/host/list" class="uri">http://0.0.0.0:9000/#/host/list</a> 了。</p>
<h2><span class="header-section-number">6.4</span> 实现RESTful API调用</h2>
<p>PROJ<sub>ROOT</sub>/web/app/scripts/host/list.js</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">
<span class="ot">angular</span>.<span class="fu">module</span>(<span class="st">'webApp'</span>)
  .<span class="fu">controller</span>(<span class="st">'HostListCtrl'</span>, <span class="kw">function</span> ($scope,Restangular) {
    <span class="ot">console</span>.<span class="fu">log</span>(<span class="st">'@HostListCtrl'</span>);

    <span class="kw">var</span> url = <span class="ot">Restangular</span>.<span class="fu">all</span>(<span class="st">'resource/hosts'</span>);

    <span class="ot">url</span>.<span class="fu">getList</span>().<span class="fu">then</span>(<span class="kw">function</span>(hosts) {
        <span class="ot">$scope</span>.<span class="fu">hosts</span> = hosts;
      });
  });

</code></pre>
<h2><span class="header-section-number">6.5</span> 添加测试数据</h2>
<p>根据前面的RESTful API约定，可以创建静态的json文件用于前端开发测试。</p>
<ul>
<li>`PROJ<sub>ROOT</sub>/web/app/api/resource/hosts`</li>
</ul>
<pre class="sourceCode javascript"><code class="sourceCode javascript">[
    {
        <span class="st">&quot;comment&quot;</span>: <span class="st">&quot;comment1&quot;</span>,
        <span class="st">&quot;hostname&quot;</span>: <span class="st">&quot;host1&quot;</span>,
        <span class="st">&quot;id&quot;</span>: <span class="dv">1</span>,
        <span class="st">&quot;keystate&quot;</span>: <span class="kw">null</span>,
        <span class="st">&quot;minionid&quot;</span>: <span class="st">&quot;minion1&quot;</span>,
    },
    {
        <span class="st">&quot;hostname&quot;</span>: <span class="st">&quot;host2&quot;</span>,
        <span class="st">&quot;id&quot;</span>: <span class="dv">2</span>,
        <span class="st">&quot;keystate&quot;</span>: <span class="st">&quot;Accepted&quot;</span>,
        <span class="st">&quot;minionid&quot;</span>: <span class="st">&quot;minion2&quot;</span>,
        <span class="st">&quot;virtual&quot;</span>: <span class="st">&quot;vmware&quot;</span>
    }
]</code></pre>
<ul>
<li>`PROJ<sub>ROOT</sub>/web/app/api/resource/hosts/1`</li>
</ul>
<pre class="sourceCode javascript"><code class="sourceCode javascript">TODO</code></pre>
<h2><span class="header-section-number">6.6</span> 编写html模板</h2>
<p>`PROJ<sub>ROOT</sub>/web/app/views/host/list.html`</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;container&quot;</span><span class="ot"> ng-controller=</span><span class="st">&quot;HostListCtrl&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;ol</span><span class="ot"> class=</span><span class="st">&quot;breadcrumb&quot;</span><span class="kw">&gt;</span>
        <span class="kw">&lt;li</span> <span class="kw">&gt;&lt;strong&gt;</span>资源<span class="kw">&lt;/strong&gt;&lt;/li&gt;</span>
        <span class="kw">&lt;li</span><span class="ot"> class=</span><span class="st">&quot;active&quot;</span><span class="kw">&gt;&lt;strong&gt;</span>主机<span class="kw">&lt;/strong&gt;&lt;/li&gt;</span>
  <span class="kw">&lt;/ol&gt;</span>
    <span class="kw">&lt;table</span><span class="ot"> class=</span><span class="st">&quot;table table-striped&quot;</span><span class="kw">&gt;</span>
        <span class="kw">&lt;tr&gt;&lt;th</span><span class="ot"> width=</span><span class="st">&quot;20%&quot;</span><span class="kw">&gt;</span>主机名<span class="kw">&lt;/th&gt;&lt;th</span><span class="ot"> width=</span><span class="st">&quot;20%&quot;</span><span class="kw">&gt;</span>minionid<span class="kw">&lt;/th&gt;&lt;th&gt;</span>key状态<span class="kw">&lt;/th&gt;&lt;th&gt;</span>虚拟化<span class="kw">&lt;/th&gt;&lt;th&gt;</span>操作<span class="kw">&lt;/th&gt;&lt;/tr&gt;</span>
        <span class="kw">&lt;tr</span><span class="ot"> ng-repeat=</span><span class="st">&quot;host in hosts | orderBy: '-id'&quot;</span><span class="kw">&gt;</span>
            <span class="kw">&lt;td&gt;&lt;a</span><span class="ot"> ng-href=</span><span class="st">&quot;/#/{{host.id}}&quot;</span><span class="kw">&gt;</span>{{host.hostname}}<span class="kw">&lt;/td&gt;</span>
            <span class="kw">&lt;td&gt;</span>{{host.minionid}}<span class="kw">&lt;/td&gt;</span>
            <span class="kw">&lt;td&gt;</span>{{host.keystate}}<span class="kw">&lt;/td&gt;</span>
            <span class="kw">&lt;td&gt;</span>{{host.virtual}}<span class="kw">&lt;/td&gt;</span>
            <span class="kw">&lt;td&gt;</span>
                <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;button&quot;</span><span class="ot"> class=</span><span class="st">&quot;btn btn-primary btn-xs&quot;</span><span class="kw">&gt;</span>更新<span class="kw">&lt;/button&gt;</span>
                <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;button&quot;</span><span class="ot"> class=</span><span class="st">&quot;btn btn-danger btn-xs&quot;</span><span class="kw">&gt;</span>删除<span class="kw">&lt;/button&gt;</span>
            <span class="kw">&lt;/td&gt;</span>
        <span class="kw">&lt;/tr&gt;</span>
        <span class="kw">&lt;tr&gt;</span>
            <span class="kw">&lt;td&gt;&lt;button</span><span class="ot"> type=</span><span class="st">&quot;button&quot;</span><span class="ot"> class=</span><span class="st">&quot;btn btn-success&quot;</span><span class="kw">&gt;</span>增加主机<span class="kw">&lt;/button&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</span>
        <span class="kw">&lt;/tr&gt;</span>
    <span class="kw">&lt;/table&gt;</span>
<span class="kw">&lt;/div&gt;</span></code></pre>
<h2><span class="header-section-number">6.7</span> 前端测试</h2>
<p>此时，在 <a href="http://0.0.0.0:9000/#/host/list" class="uri">http://0.0.0.0:9000/#/host/list</a> 已经可以看到json文件中的数据了。</p>
<p>但是，更严谨的做法是写单元测试。</p>
<p>(TODO)</p>
<h1><span class="header-section-number">7</span> 集成测试</h1>
<p>(TODO)</p>
<h1><span class="header-section-number">8</span> 参考资料</h1>
<ol>
<li>白话SCRUM 之二：product backlog <a href="http://blog.csdn.net/dylanren/article/details/7072734" class="uri">http://blog.csdn.net/dylanren/article/details/7072734</a></li>
<li>Scrum 之 product Backlog <a href="http://www.zhoujingen.cn/blog/2767.html" class="uri">http://www.zhoujingen.cn/blog/2767.html</a></li>
<li>领域驱动设计(精简版) <a href="http://www.infoq.com/cn/minibooks/domain-driven-design-quickly-new" class="uri">http://www.infoq.com/cn/minibooks/domain-driven-design-quickly-new</a></li>
<li><p>scrum和分支管理策略 <a href="http://holbrook.github.io/2015/05/05/git\_branch\_within\_scrum.html" class="uri">http://holbrook.github.io/2015/05/05/git\_branch\_within\_scrum.html</a></p></li>
<li><p>SQLAlchemy继承关系映射 <a href="http://docs.sqlalchemy.org/en/rel\_1\_0/orm/inheritance.html" class="uri">http://docs.sqlalchemy.org/en/rel\_1\_0/orm/inheritance.html</a></p></li>
</ol>
